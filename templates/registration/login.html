{% extends "_base.html" %}
{% load static %}

{% block head_title %}ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ ğŸ”{% endblock %}

{% block extra_css %}
<!-- ÙÙˆÙ†Øª ÙØ§Ø±Ø³ÛŒ Vazirmatn -->
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
/* ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø§ÛŒÙ‡ */
html, body {
    height: 100%;
    margin: 0;
    font-family: 'Vazirmatn', sans-serif;
    direction: rtl;
    background: linear-gradient(135deg, #1e1e2f, #2a2a3d, #3a3a4f);
    font-variation-settings: "wght" 400;
    overflow: hidden;
}

/* Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ù…ØªØ­Ø±Ú© Ø³ØªØ§Ø±Ù‡â€ŒØ§ÛŒ */
body::before {
    content: "";
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: url("{% static 'images/stars.gif' %}") repeat;
    opacity: 0.05;
    z-index: -1;
}

/* Ù…Ø±Ú©Ø²Ø¯Ù‡ÛŒ ÙØ±Ù… */
body {
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Ú©Ø§Ù†ØªÛŒÙ†Ø± ÙØ±Ù… */
.form-wrapper {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Ú©Ø§Ø±Øª Ø´ÛŒØ´Ù‡â€ŒØ§ÛŒ */
.glass-card {
    width: 100%;
    max-width: 400px;
    background: rgba(30,30,45,0.8);
    padding: 40px;
    border-radius: 15px;
    box-shadow:
        0 0 20px rgba(78, 106, 171, 0.4),
        0 0 40px rgba(78, 106, 171, 0.2),
        0 0 60px rgba(78, 106, 171, 0.1);
    backdrop-filter: blur(8px);
    color: #fff;
    display: flex;
    flex-direction: column;
    gap: 15px;
    text-align: center;
    animation: fadeInUp 0.8s ease-out;
}

/* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† ÙˆØ±ÙˆØ¯ */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Ø¹Ù†ÙˆØ§Ù† ÙØ±Ù… */
h2 {
    margin-bottom: 20px;
    font-weight: 700;
}

/* ÙØ±Ù… ÙˆØ³Ø·â€ŒÚ†ÛŒÙ† */
form {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    width: 100%;
}

/* Ù„ÛŒØ¨Ù„â€ŒÙ‡Ø§ */
label {
    font-weight: 600;
    display: block;
    text-align: right;
    margin-bottom: 5px;
    width: 100%;
}

/* ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ */
input[type="text"], input[type="password"] {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: none;
    background: rgba(255,255,255,0.1);
    color: #fff;
    font-size: 15px;
}

/* ÙÙˆÚ©ÙˆØ³ Ø±ÙˆÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ */
input:focus {
    outline: none;
    background: rgba(255,255,255,0.2);
    font-variation-settings: "wght" 600;
}

/* Ø¯Ú©Ù…Ù‡ ÙˆØ±ÙˆØ¯ */
button {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: none;
    background: #4e6aab;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    margin-top: 10px;
    position: relative;
    overflow: hidden;
}

/* Ø§ÙÚ©Øª Ù‡Ø§ÙˆØ± */
button:hover {
    background: #3b588a;
}

/* Ø§ÙÚ©Øª Ù…ÙˆØ¬ÛŒ Ripple */
button::after {
    content: "";
    position: absolute;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    transform: scale(0);
    animation: ripple 0.6s linear;
    pointer-events: none;
}

@keyframes ripple {
    to {
        transform: scale(4);
        opacity: 0;
    }
}

/* Ø®Ø·Ø§Ù‡Ø§ÛŒ ÙØ±Ù… */
.form-errors {
    background: rgba(255, 0, 0, 0.2);
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 10px;
    color: #ff6b6b;
}

/* Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ */
a {
    color: #fff;
    text-decoration: underline;
    font-weight: 400;
}

/* Ø¨Ø®Ø´ Ú†Ú©â€ŒØ¨Ø§Ú©Ø³ Ùˆ Ù„ÛŒÙ†Ú© ÙØ±Ø§Ù…ÙˆØ´ÛŒ Ø±Ù…Ø² */
.checkbox-wrapper {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 5px;
    width: 100%;
}

/* ÙÙˆØªØ± ÙØ±Ù… */
.form-footer {
    margin-top: 15px;
    font-size: 14px;
}

/* ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§ÛŒÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
@media (max-width: 500px) {
    .glass-card {
        padding: 25px;
        max-width: 90%;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="form-wrapper">
    <div class="glass-card">
        <h2>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h2>

        {% if form.non_field_errors %}
        <div class="form-errors">
            {% for error in form.non_field_errors %}
                <p>{{ error }}</p>
            {% endfor %}
        </div>
        {% endif %}

        <form method="post" novalidate>
            {% csrf_token %}

            <!-- Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ -->
            <label for="{{ form.username.id_for_label }}">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø§ÛŒÙ…ÛŒÙ„</label>
            <div style="width: 100%;">
                {{ form.username }}
            </div>

            <!-- Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± -->
            <label for="{{ form.password.id_for_label }}">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
            <div style="width: 100%;">
                {{ form.password }}
            </div>

            <!-- Ú†Ú©â€ŒØ¨Ø§Ú©Ø³ Ùˆ Ù„ÛŒÙ†Ú© ÙØ±Ø§Ù…ÙˆØ´ÛŒ -->
            <div class="checkbox-wrapper">
                <label>{{ form.remember_me }} Ù…Ø±Ø§ Ø¨Ù‡ Ø®Ø§Ø·Ø± Ø¨Ø³Ù¾Ø§Ø±</label>
                <a href="{% url 'password_reset' %}">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ ÙØ±Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù‡â€ŒØ§Ù…ØŸ</a>
            </div>

            <!-- Ø¯Ú©Ù…Ù‡ ÙˆØ±ÙˆØ¯ -->
            <button type="submit">ÙˆØ±ÙˆØ¯ ğŸ”</button>
        </form>

        <!-- ÙÙˆØªØ± ÙØ±Ù… -->
        <div class="form-footer">
            Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯ØŸ <a href="{% url 'signup' %}">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ù†ÛŒØ¯</a>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§ÙÚ©Øª Ù…ÙˆØ¬ÛŒ -->
<script>
document.querySelector("button").addEventListener("click", function(e) {
    const rect = this.getBoundingClientRect();
    this.style.setProperty('--x', `${e.clientX - rect.left}px`);
    this.style.setProperty('--y', `${e.clientY - rect.top}px`);
});
</script>
{% endblock %}